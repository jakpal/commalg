\section{Dimension of domains and regularity}

We aim to prove the theorem that the dimension of a domain is equal to the dimension of its localization at any maximal ideal.

\begin{prop}[going-down]
  \label{going-down}
  Let \(f \colon A \to B\) be an integral extension with \(A\) normal. Let \(\mathfrak{q}_2\) be prime in \(B,\) \(\mathfrak{p}_1 \subseteq \mathfrak{p}_2\) distinct prime ideals in \(A,\) such that \(\mathfrak{p}_2 = \mathfrak{q}_2 \cap A.\)
  Then there exists a prime ideal \(\mathfrak{q}_1 \subseteq B\) such that
  \(\mathfrak{q}_1 \cap A = \mathfrak{p}_1,\)
  \(\mathfrak{q}_1 \subseteq \mathfrak{q}_2.\)
\end{prop}
\begin{proof}
  Can be found in \cite{atiyah1994introduction}.
\end{proof}

\begin{theorem}
  \label{domain dimension}
  Let \(A\) be a finitely generated \(k\)-algebra that is a domain. Then for any maximal ideal \(\mathfrak{m},\) \(\dim(A) = \dim(A_{\mathfrak{m}}).\)
\end{theorem}
\begin{proof}
  Let \(\mathfrak{p}\in \spec(A).\) We claim that
  \(\dim (A_{\mathfrak{p}}) + \dim(A/{\mathfrak{p}}) = \dim(A).\)

  Recall that
  \[\spec(A_{\mathfrak{p}}) = \{\mathfrak{q} \subseteq \mathfrak{p}\}, \enspace\spec(A/{\mathfrak{p}}) = \{\mathfrak{q} \supseteq \mathfrak{p}\}.\]
  Hence, the inequality
  \(\dim(A_{\mathfrak{p}}) + \dim(A/{\mathfrak{p}}) \leq \dim(A)\)
  follows because one can concatenate chains.

  The other inequality is nontrivial and uses \cref{going-up}. The slogan now is: for any prime \(\mathfrak{p},\) the maximum length of a chain in \(A\) is the maximum length of a chain containing \(\mathfrak{p}.\)

  Take any maximal chain \(\mathfrak{p}_0 \subseteq \dotso \subseteq \mathfrak{p}_r\) in \(A.\) We claim that the length of this chain is \(\dim(A)\) it will then follow that all maximal chains have the same lengths, and so one can pick any maximal chain containing \(\mathfrak{p};\) the remaining inequality is then satisfied.

  We proceed using Noether normalization and going-down (\cref{going-down}). Namely, we can find \(S = k[x_1, \dotsc, x_d] \subseteq A\) a finite extension wich \(\mathfrak{p}_i \cap S = (x_{d_{i+1}}, \dotsc, x_d),\) \(d_i = \dim(A/{\mathfrak{p}_i}).\)
  We aim to find that \(r = d,\) so that \(\mathfrak{p}_i \cap S = (x_i, \dotsc, x_d).\)
  If it is not so and \(r < d,\) then there exists \(i\) such that
  \(\mathfrak{p}_i \cap S = (x_j, \dotsc, x_d)\)
  and
  \(\mathfrak{p}_{i+1} \cap \supseteq (x_{j-2}, \dotsc, x_d).\)
  Now, we find \(\tilde{\mathfrak{p}}\) such that \(\mathfrak{p}_i \subseteq \tilde{\mathfrak{p}} \subseteq \mathfrak{p}_{i+1},\) \(\tilde{\mathfrak{p}} \cap S = (x_{j-1}, \dotsc, x_d).\)
  We obtain this by using \cref{going-down} in the case of
  \(k[x_1, \dotsc, x_{j-1}] \cong S/{S \cap \mathfrak{p}_i} \to A/{\mathfrak{p}_i},\)
  \(x_{j-1} \subseteq \mathfrak{p}_{i+1} \cap S /{\mathfrak{p}_i \cap S}\) in \(S/{S \cap \mathfrak{p}_i},\)
  \(\mathfrak{p}_{i+1}/{\mathfrak{p}_i}\) in \(A/{\mathfrak{p}_i};\) this gives
  \(\mathfrak{q} \subseteq \mathfrak{p}_{i+1}/{\mathfrak{p}_i} \subseteq A/{\mathfrak{p}_i}.\)
\end{proof}

% For some time, we will consider the following setup: \(A\) is a finitely generated algebra over \(k = \cl{k},\) as well as a domain. Then the set of regular points is open (does not need the domain assumption) and we will claim that \(A\) has regular points.
% For technical reasons, we will consider the case of characteristic zero, though our results carry over to arbitrary characteristic.

\begin{df}
  The \emph{cotangent space} at \(\mathfrak m\) is \(\mathfrak m / {\mathfrak m^2}.\)
\end{df}

We make use of the formalism of Kaehler differentials, introduced in \cref{kaehler section}.

\begin{lemma}
  \label{differentials and ideal quotient}
  Let \(A\) be a \(k\)-algebra, \(k\) an algebraically closed field, and \(\mathfrak m \subseteq A\) a maximal ideal. Then
  \[\Omega_{A/{k}} /{\mathfrak m \Omega_{A/{k}}} \cong \mathfrak m /{\mathfrak m^2}.\]
\end{lemma}
\begin{proof}
  A proof can be found in \cite[Proposition 8.7]{Hartshorne1977}. Note that \(\Omega_{A/{k}} /{\mathfrak{m} \Omega_{A/{k}}} \cong \Omega_{A/{k}} \tensor_A A/{\mathfrak{m}}.\) Moreover, since \(k\) is algebraically closed, \(A/{\mathfrak{m}} \cong k.\)
\end{proof}

\begin{lemma}
  Let \(A\) be a \(k-\)algebra, \(k\) algebraically closed \(A\) a domain. Let \(K = \fractions(A).\) Then
  \(\Omega_{A/{\mathfrak{m}}} \tensor_A K = K^{\oplus \dim(A)}.\)
\end{lemma}
\begin{proof}
  Omitted.
\end{proof}

The above allow us to derive the following.

\begin{prop}
  \label{prop omega}
  The following are equivalent, where \(d = \dim(A),\) \(k\) algebraically closed.
  \begin{enumerate}
  \item \(\mathfrak m\) is regular,
  \item \(\dim_k(\Omega /{\mathfrak m \Omega}) = d,\)
  \item \(\dim_k(\Omega / {\mathfrak m \Omega}) \leq d,\)
  \item \(\Omega_{\mathfrak m}\) is a free \(A\)-module.
  \end{enumerate}
\end{prop}
\begin{proof}
  \(3 \implies 2,\) because otherwise,
  \[\dim_k(\mathfrak m /{\mathfrak m^2}) = \dim_k(\Omega / {\mathfrak m \Omega}) < d,\]
  contradicting a corollary from \cref{krull's principal ideal theorem} together with \cref{domain dimension}.
  For \(2 \iff 4,\) use a result from the exercise sheet.
  Also compare with \cite[Theorem 8.8]{Hartshorne1977}.
\end{proof}

\begin{prop}[smearing out]
  \label{smearing out}
  Let \(M\) be a finitely generated \(A\)-module. If \(\mathfrak p \in \spec(A)\) is such that
  \[\dim_{\kappa(\mathfrak p)}(M \tensor_A \kappa(\mathfrak p)) \leq d,\]
  then there exists \(f \in A \setminus \mathfrak p\) such that \(M_f\) is generated by no more than \(d\) elements.
\end{prop}

\begin{corollary}
  With assumptions on \(A\) as before, there exists \(f \in A \setminus \{0\}\) such that \(\Omega_f\) is generated by at most \(d\) elements. Hence, every point outside \(V(f)\) is regular.
\end{corollary}
\begin{proof}
  Apply \cref{smearing out} to \(\mathfrak p = (0) \subseteq A,\) \(M = \Omega.\) We get \(f\) such that \(\Omega_f\) is generated by no more than \(d\) elements. By \cref{prop omega},
  \[\forall f \notin \mathfrak m \enspace \Omega/{\mathfrak m \Omega} \cong \Omega_f /{\mathfrak m \Omega_f}\]
  which is generated by no more than \(d\) elements, which is equivalent to
  \(\dim_k(\Omega / {\mathfrak m \Omega}) \leq d.\)
  By \cref{prop omega}, \(\mathfrak m\) is regular.
\end{proof}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../commalg"
%%% End:
